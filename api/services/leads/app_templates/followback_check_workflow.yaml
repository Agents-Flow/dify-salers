version: "0.5.0"
kind: app
app:
  name: "äº’å…³æ£€æµ‹è‡ªåŠ¨åŒ–"
  mode: workflow
  icon: "ğŸ”„"
  icon_background: "#E8F5E9"
  description: "è‡ªåŠ¨æ£€æµ‹Instagram/Xäº’å…³çŠ¶æ€ï¼Œå¯¹å·²å›å…³ç”¨æˆ·è‡ªåŠ¨å‘é€DMï¼Œå¯¹è¶…æ—¶æœªå›å…³ç”¨æˆ·è‡ªåŠ¨å–å…³ã€‚"
  use_icon_as_answer_icon: false

workflow:
  graph:
    nodes:
      - id: start
        type: start
        data:
          type: start
          title: å¼€å§‹æ£€æµ‹
          variables:
            - variable: kol_id
              label: KOL ID
              type: text-input
              required: true
            - variable: check_limit
              label: æ£€æµ‹æ•°é‡
              type: number
              required: false
              default: 100
            - variable: auto_dm
              label: è‡ªåŠ¨å‘é€DM
              type: select
              required: false
              options:
                - "true"
                - "false"
              default: "true"
        position:
          x: 100
          y: 200

      - id: generate_dm
        type: tool
        data:
          type: tool
          title: ç”ŸæˆDMæ¶ˆæ¯
          provider_id: social_outreach
          provider_type: builtin
          tool_name: generate_message
          tool_parameters:
            template_category:
              type: constant
              value: conversion
            follower_name:
              type: constant
              value: "there"
            kol_name:
              type: constant
              value: "our team"
        position:
          x: 350
          y: 200

      - id: create_dm_task
        type: tool
        data:
          type: tool
          title: åˆ›å»ºDMä»»åŠ¡
          provider_id: social_outreach
          provider_type: builtin
          tool_name: create_outreach_task
          tool_parameters:
            task_type:
              type: constant
              value: dm
            target_kol_id:
              type: variable
              value:
                - start
                - kol_id
            target_count:
              type: variable
              value:
                - start
                - check_limit
        position:
          x: 600
          y: 200

      - id: summary
        type: llm
        data:
          type: llm
          title: ç”ŸæˆæŠ¥å‘Š
          model:
            provider: openai
            name: gpt-4o-mini
            mode: chat
            completion_params:
              temperature: 0.3
          prompt_template:
            - role: system
              text: |
                æ ¹æ®ä»¥ä¸‹ä¿¡æ¯ç”Ÿæˆä¸€ä»½ç®€æ´çš„äº’å…³æ£€æµ‹æŠ¥å‘Šï¼š
                
                DMä»»åŠ¡åˆ›å»ºç»“æœï¼š{{#create_dm_task.text#}}
                
                è¯·ç”¨ç®€æ´çš„è¯­è¨€æ€»ç»“æ£€æµ‹ç»“æœå’Œåç»­æ“ä½œã€‚
            - role: user
              text: "è¯·ç”ŸæˆæŠ¥å‘Š"
        position:
          x: 850
          y: 200

      - id: end
        type: end
        data:
          type: end
          title: å®Œæˆ
          outputs:
            - variable: report
              value_selector:
                - summary
                - text
            - variable: task_info
              value_selector:
                - create_dm_task
                - json
        position:
          x: 1100
          y: 200

    edges:
      - source: start
        target: generate_dm
        sourceHandle: source
        targetHandle: target
      - source: generate_dm
        target: create_dm_task
        sourceHandle: source
        targetHandle: target
      - source: create_dm_task
        target: summary
        sourceHandle: source
        targetHandle: target
      - source: summary
        target: end
        sourceHandle: source
        targetHandle: target

  features:
    file_upload:
      enabled: false
    opening_statement: ""
    suggested_questions: []
    sensitive_word_avoidance:
      enabled: false
    text_to_speech:
      enabled: false
    speech_to_text:
      enabled: false
