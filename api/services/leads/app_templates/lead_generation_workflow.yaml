version: "0.5.0"
kind: app
app:
  name: "KOLç²‰ä¸è·å®¢å·¥ä½œæµ"
  mode: workflow
  icon: "ğŸ¯"
  icon_background: "#E6F7FF"
  description: "è‡ªåŠ¨åŒ–æŠ“å–KOLç²‰ä¸å¹¶åˆ›å»ºå¤–å±•ä»»åŠ¡çš„å·¥ä½œæµã€‚è¾“å…¥KOLç”¨æˆ·åï¼Œè‡ªåŠ¨æŠ“å–ç²‰ä¸å¹¶æ‰¹é‡åˆ›å»ºå…³æ³¨/DMä»»åŠ¡ã€‚"
  use_icon_as_answer_icon: false

workflow:
  graph:
    nodes:
      - id: start
        type: start
        data:
          type: start
          title: å¼€å§‹
          variables:
            - variable: platform
              label: å¹³å°
              type: select
              required: true
              options:
                - instagram
                - x
              default: instagram
            - variable: kol_username
              label: KOLç”¨æˆ·å
              type: text-input
              required: true
              max_length: 100
            - variable: target_count
              label: ç›®æ ‡æ•°é‡
              type: number
              required: false
              default: 50
            - variable: task_type
              label: ä»»åŠ¡ç±»å‹
              type: select
              required: true
              options:
                - follow
                - dm
                - follow_dm
              default: follow_dm
        position:
          x: 100
          y: 200

      - id: scrape_followers
        type: tool
        data:
          type: tool
          title: æŠ“å–KOLç²‰ä¸
          provider_id: social_outreach
          provider_type: builtin
          tool_name: scrape_followers
          tool_parameters:
            platform:
              type: variable
              value:
                - start
                - platform
            username:
              type: variable
              value:
                - start
                - kol_username
            count:
              type: variable
              value:
                - start
                - target_count
        position:
          x: 350
          y: 200

      - id: check_results
        type: if-else
        data:
          type: if-else
          title: æ£€æŸ¥ç»“æœ
          conditions:
            - id: condition_1
              logical_operator: and
              conditions:
                - variable_selector:
                    - scrape_followers
                    - text
                  comparison_operator: is not empty
        position:
          x: 600
          y: 200

      - id: create_task
        type: tool
        data:
          type: tool
          title: åˆ›å»ºå¤–å±•ä»»åŠ¡
          provider_id: social_outreach
          provider_type: builtin
          tool_name: create_outreach_task
          tool_parameters:
            task_type:
              type: variable
              value:
                - start
                - task_type
            target_kol_id:
              type: variable
              value:
                - start
                - kol_username
            target_count:
              type: variable
              value:
                - start
                - target_count
        position:
          x: 850
          y: 150

      - id: error_message
        type: answer
        data:
          type: answer
          title: é”™è¯¯æç¤º
          answer: "æŠ“å–ç²‰ä¸å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦æ­£ç¡®æˆ–ç¨åé‡è¯•ã€‚"
        position:
          x: 850
          y: 300

      - id: success_end
        type: end
        data:
          type: end
          title: æˆåŠŸå®Œæˆ
          outputs:
            - variable: task_id
              value_selector:
                - create_task
                - json
                - task_id
            - variable: followers_scraped
              value_selector:
                - scrape_followers
                - json
                - total_scraped
            - variable: message
              value_selector:
                - create_task
                - text
        position:
          x: 1100
          y: 150

      - id: error_end
        type: end
        data:
          type: end
          title: é”™è¯¯ç»“æŸ
          outputs:
            - variable: error
              value: "æŠ“å–å¤±è´¥"
        position:
          x: 1100
          y: 300

    edges:
      - source: start
        target: scrape_followers
        sourceHandle: source
        targetHandle: target
      - source: scrape_followers
        target: check_results
        sourceHandle: source
        targetHandle: target
      - source: check_results
        target: create_task
        sourceHandle: "true"
        targetHandle: target
      - source: check_results
        target: error_message
        sourceHandle: "false"
        targetHandle: target
      - source: create_task
        target: success_end
        sourceHandle: source
        targetHandle: target
      - source: error_message
        target: error_end
        sourceHandle: source
        targetHandle: target

  features:
    file_upload:
      enabled: false
    opening_statement: ""
    suggested_questions: []
    sensitive_word_avoidance:
      enabled: false
    text_to_speech:
      enabled: false
    speech_to_text:
      enabled: false
